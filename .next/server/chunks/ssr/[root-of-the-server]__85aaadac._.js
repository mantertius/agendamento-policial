module.exports=[39889,(a,b,c)=>{"use strict";b.exports=a.r(30751).vendored.contexts.HooksClientContext},18228,(a,b,c)=>{"use strict";b.exports=a.r(30751).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},30751,(a,b,c)=>{"use strict";b.exports=a.r(18622)},71629,(a,b,c)=>{"use strict";b.exports=a.r(30751).vendored["react-ssr"].ReactJsxRuntime},97947,(a,b,c)=>{"use strict";b.exports=a.r(30751).vendored["react-ssr"].React},3904,(a,b,c)=>{"use strict";b.exports=a.r(30751).vendored.contexts.AppRouterContext},61009,(a,b,c)=>{"use strict";b.exports=a.r(30751).vendored["react-ssr"].ReactServerDOMTurbopackClient},92548,(a,b,c)=>{"use strict";b.exports=a.r(30751).vendored["react-ssr"].ReactDOM},45376,20394,a=>{"use strict";var b=a.i(71629),c=a.i(97947);let d=[{date:"01-01",name:"Confraternização Universal",type:"nacional"},{date:"04-21",name:"Tiradentes",type:"nacional"},{date:"05-01",name:"Dia do Trabalhador",type:"nacional"},{date:"09-07",name:"Independência do Brasil",type:"nacional"},{date:"10-12",name:"Nossa Senhora Aparecida",type:"nacional"},{date:"11-02",name:"Finados",type:"nacional"},{date:"11-15",name:"Proclamação da República",type:"nacional"},{date:"11-20",name:"Dia da Consciência Negra",type:"nacional"},{date:"12-25",name:"Natal",type:"nacional"},{date:"06-24",name:"São João",type:"estadual"},{date:"06-29",name:"São Pedro",type:"estadual"},{date:"09-16",name:"Emancipação Política de Alagoas",type:"estadual"},{date:"11-20",name:"Morte de Zumbi dos Palmares",type:"estadual"},{date:"12-08",name:"Nossa Senhora da Conceição (Padroeira de Maceió)",type:"municipal"}];function e(a){let b,c,e,f,g,h,i,j,k,l,m,n,o,p,q=[];for(let b of d)q.push({date:`${a}-${b.date}`,name:b.name,type:b.type});let r=(b=a%19,c=Math.floor(a/100),e=a%100,f=Math.floor(c/4),g=Math.floor((c+8)/25),h=Math.floor((c-g+1)/3),i=(19*b+c-f-h+15)%30,j=(32+c%4*2+2*Math.floor(e/4)-i-e%4)%7,k=Math.floor((b+11*i+22*j)/451),l=new Date(a,Math.floor((i+j-7*k+114)/31)-1,(i+j-7*k+114)%31+1),m=[],n=a=>{let b=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`${b}-${c}-${d}`},p=(o=(a,b)=>{let c=new Date(a);return c.setDate(c.getDate()+b),c})(l,-47),m.push({date:n(o(l,-48)),name:"Carnaval (Segunda)",type:"nacional"}),m.push({date:n(p),name:"Carnaval (Terça)",type:"nacional"}),m.push({date:n(o(l,-46)),name:"Quarta-feira de Cinzas",type:"nacional"}),m.push({date:n(o(l,-2)),name:"Sexta-feira Santa",type:"nacional"}),m.push({date:n(l),name:"Páscoa",type:"nacional"}),m.push({date:n(o(l,60)),name:"Corpus Christi",type:"nacional"}),m);return q.push(...r),q.sort((a,b)=>a.date.localeCompare(b.date))}function f(a){let[b]=a.split("-").map(Number),c=e(b).find(b=>b.date===a);return c?{isHoliday:!0,holidayName:c.name,holidayType:c.type}:{isHoliday:!1}}a.s(["FIXED_HOLIDAYS",0,d,"getHolidaysForYear",()=>e,"isHoliday",()=>f],20394);let g=(0,c.createContext)(void 0),h={slots:[],bookings:[],availabilityConfigs:[]};function i({children:a}){let[d,e]=(0,c.useState)(h),[i,j]=(0,c.useState)(!1),k=(0,c.useCallback)(async()=>{try{let a=await fetch("/api/data");if(a.ok){let b=await a.json();e({slots:b.slots||[],bookings:b.bookings||[],availabilityConfigs:b.availabilityConfigs||[]})}}catch(a){console.error("Erro ao buscar dados:",a)}},[]);(0,c.useEffect)(()=>{k().then(()=>j(!0))},[k]);let l=async a=>{try{if((await fetch(`/api/slots/${a}`,{method:"DELETE"})).ok)return e(b=>({...b,slots:b.slots.filter(b=>b.id!==a),bookings:b.bookings.filter(b=>b.slotId!==a)})),!0;return!1}catch(a){return console.error("Erro ao remover slot:",a),!1}},m=async a=>{try{if((await fetch(`/api/slots/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isDisabled:!0})})).ok)return e(b=>({...b,slots:b.slots.map(b=>b.id===a?{...b,isDisabled:!0,isBooked:!1,booking:void 0}:b),bookings:b.bookings.filter(b=>b.slotId!==a)})),!0;return!1}catch(a){return console.error("Erro ao desativar slot:",a),!1}},n=async a=>{try{if((await fetch(`/api/slots/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isDisabled:!1})})).ok)return e(b=>({...b,slots:b.slots.map(b=>b.id===a?{...b,isDisabled:!1}:b)})),!0;return!1}catch(a){return console.error("Erro ao reativar slot:",a),!1}},o=async a=>{try{let b=await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(b.ok){let a=(await b.json()).booking;return e(b=>({...b,bookings:[...b.bookings,a],slots:b.slots.map(b=>b.id===a.slotId?{...b,isBooked:!0,booking:a}:b)})),a}return null}catch(a){return console.error("Erro ao criar agendamento:",a),null}},p=async a=>{try{if((await fetch(`/api/bookings/${a}`,{method:"DELETE"})).ok)return e(b=>{let c=b.bookings.find(b=>b.id===a);return c?{...b,bookings:b.bookings.filter(b=>b.id!==a),slots:b.slots.map(a=>a.id===c.slotId?{...a,isBooked:!1,booking:void 0}:a)}:b}),!0;return!1}catch(a){return console.error("Erro ao cancelar agendamento:",a),!1}},q=async a=>{try{(await fetch("/api/configs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok&&e(b=>({...b,availabilityConfigs:[...b.availabilityConfigs,a]}))}catch(a){console.error("Erro ao criar configuração:",a)}},r=async a=>{try{(await fetch(`/api/configs/${a}`,{method:"DELETE"})).ok&&e(b=>({...b,availabilityConfigs:b.availabilityConfigs.filter(b=>b.id!==a)}))}catch(a){console.error("Erro ao remover configuração:",a)}},s=async a=>{let b=[],[c,g,h]=a.startDate.split("-").map(Number),[i,j,k]=a.endDate.split("-").map(Number),l=new Date(c,g-1,h),m=new Date(i,j-1,k);for(let c=new Date(l);c<=m;c.setDate(c.getDate()+1)){let e=c.getDay();if(!a.daysOfWeek.includes(e))continue;let g=c.getMonth()+1;if(a.vacationMonths&&a.vacationMonths.includes(g))continue;let h=c.getFullYear(),i=String(c.getMonth()+1).padStart(2,"0"),j=String(c.getDate()).padStart(2,"0"),k=`${h}-${i}-${j}`;if(f(k).isHoliday)continue;let[l,m]=a.startTime.split(":").map(Number),[n,o]=a.endTime.split(":").map(Number),p=60*l+m,q=60*n+o,r=-1,s=-1;if(a.lunchBreakEnabled&&a.lunchBreakStart&&a.lunchBreakDuration){let[b,c]=a.lunchBreakStart.split(":").map(Number);s=(r=60*b+c)+a.lunchBreakDuration}for(;p+a.slotDuration<=q;){let c=Math.floor(p/60),e=p%60,f=p+a.slotDuration,g=Math.floor(f/60),h=f%60;if(-1!==r){let b=p,c=p+a.slotDuration;if(b>=r&&b<s||c>r&&c<=s||b<=r&&c>=s){p+=a.slotDuration;continue}}let i=`${String(c).padStart(2,"0")}:${String(e).padStart(2,"0")}`,j=`${String(g).padStart(2,"0")}:${String(h).padStart(2,"0")}`,l=`${k}-${i}`;d.slots.find(a=>a.id===l)||b.push({id:l,date:k,startTime:i,endTime:j,isBooked:!1}),p+=a.slotDuration}}if(b.length>0)try{(await fetch("/api/slots",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok&&e(a=>({...a,slots:[...a.slots,...b]}))}catch(a){console.error("Erro ao criar slots:",a)}},t=async()=>{try{(await fetch("/api/slots",{method:"DELETE"})).ok&&e(a=>({...a,slots:[],bookings:[]}))}catch(a){console.error("Erro ao limpar slots:",a)}};return(0,b.jsx)(g.Provider,{value:{...d,addSlot:a=>{e(b=>({...b,slots:[...b.slots,a]}))},removeSlot:l,disableSlot:m,reactivateSlot:n,addBooking:o,cancelBooking:p,addAvailabilityConfig:q,removeAvailabilityConfig:r,generateSlotsFromConfig:s,clearAllSlots:t,isReady:i,refreshData:k},children:a})}function j(){let a=(0,c.useContext)(g);if(void 0===a)throw Error("useApp deve ser usado dentro de AppProvider");return a}a.s(["AppProvider",()=>i,"useApp",()=>j],45376)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__85aaadac._.js.map